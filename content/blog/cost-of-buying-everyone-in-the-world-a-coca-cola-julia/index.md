---
title: "My kingdom for a Coca-Cola: using Julia to calculate the cost of buying everyone a can of coke"
date: 2023-01-06T22:20:32+05:30
draft: true
showFullContent: false
tags: ["Programming", "Tutorial"]
---

In an [episode](https://nerdfighteria.info/v/250775376/#:~:text=%22Dear%20Hank%20and%20John%2C%C2%A0Given%20its%20varying%20price%20points%20throughout%20the%20world%2C%20how%20much%20in%20USD%20would%20it%20actually%20cost%20to%20buy%20the%20world%20a%20coke%3F%22) of a podcast I was recently listening to, the the question of how much it would cost to purchase everyone in the world a can of Coca-Cola was brought up. The hosts did a reasonable job of calculating a back-of-the-napkin estimate, but I'm still not satisfied.

Perhaps in the eight years since that podcast came out the world has seen some inarguably worse usees of fortunes. Perhaps, after the last three years, we all just need some idle sources of amusement. Whatever the reason may be, I want to know the exact cost of buying everyone in the world a Coca-Cola, and I want to know it to the last cent.

So that's exactly what I'm going to do in this post. I've been learning the [Julia programming language recently](https://julialang.org/), and where its creator sees it as capable of helping us solve [climate change](https://www.youtube.com/watch?v=qGW0GT1rCvs), I'm going tobe putting it towards even more pressing problems.

## The method

### How are we going to calculate cost?

In an ideal world, Coca-Colas would cost the same everywhere and we could just multiply the number of people in the world by the price of a can of Coke.

Unfortunately, one of the many ways in which the world we live in is far from ideal, millions are disenfranchised from Coca-Cola, and those lucky enough to avoid such a fate still face price discrimination in different parts of the world.

First, we're going to find a list of how much an can of Coca-Cola costs in every country in which it is available. The cost of buying a Coca-Cola for a population of _N_ people in a country, which will be calculated based on our age threshold, will be _N * P_, where _P_ is the price of a can of Coca-Cola in the country.

For countries in which Coca-Cola isn't normally available, we're going to find the nearest country where it is available, and use that price. Perhaps accounting for the cost of shipping would be more accurate, but we do have to leave some unsolved challenges for future generations to solve.

### Who are we buying Coca-Cola for?

As benevelot bestowers of priveliges to humankind, we still do need to consider that a can of coke may not be ideal for everyone. We're going to get a list of populations for every age from 1-100 for every country in the world, which will allow us to adjust the threshold of ages we want to buy Coca-Cola for.

### Where are we getting the data from?

* **Population per country per age**: I've reduced a file provided on the website of [The UN's Department of Economic and Social Affairs](https://population.un.org/wpp/Download/Standard/Population/) to just the population of every country for every age from 1-100 as of 2021. You can download it as a CSV file [here](/blog/cost-of-buying-everyone-in-the-world-a-coca-cola-julia/UN_WPP_2021_Population_SingleAge_BothSexes_Cleaned.csv).

* **Coca-Cola prices per country**: [globalproductprices.com](https://globalproductprices.com) provides a [list](https://www.globalproductprices.com/rankings/coca_cola_price/) of Coca-Cola prices per country. I've copied them to a CSV file [here](/blog/cost-of-buying-everyone-in-the-world-a-coca-cola-julia/coca_cola_prices.csv).

## The code

{{< alert "github" >}}
You can import the Pluto notebook for this post directly [from my Github]()
{{< /alert >}}

Make sure you have the following installed on your system, if you want to follow along:

* The [Julia](https://julialang.org/) programming language
* The [Pluto](https://plutojl.org/) package for Julia

Once you've done that, go to your terminal and type `julia` to begin an interactive Julia session. Then, start a Pluto notebook by typing `using Pluto; Pluto.run()`. You should see something like this:

```julia
[ Info: Precompiling Pluto [c3e4b0f8-55cb-11ea-2926-15256bba5781]
â”Œ Info:
â”‚
â”‚     Welcome to Pluto v0.19.18 ðŸŽˆ
â”‚     Start a notebook server using:
â”‚
â”‚   julia> Pluto.run()
â”‚
â”‚     Have a look at the FAQ:
â”‚     https://github.com/fonsp/Pluto.jl/wiki
â””
[ Info: Loading...
[ Info: Listening on: 127.0.0.1:1234, thread id: 1
â”Œ Info:
â”” Opening http://localhost:1234/?secret=GAFcMdoL in your default browser... ~ have fun!
â”Œ Info:
â”‚ Press Ctrl+C in this terminal to stop Pluto
```

Follow along the link generated by Pluto to open a new notebook. You should see something like this:
{{< figure src="assets/pluto-home.png" >}}

Click 'Create a new notebook', and with that, get started!

### Importing the data

<https://github.com/datasets/country-list>
